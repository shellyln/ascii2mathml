!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ascii2mathml=e()}}(function(){return function e(t,n,r){function i(l,c){if(!n[l]){if(!t[l]){var s="function"==typeof require&&require;if(!c&&s)return s(l,!0);if(o)return o(l,!0);var a=new Error("Cannot find module '"+l+"'");throw a.code="MODULE_NOT_FOUND",a}var u=n[l]={exports:{}};t[l][0].call(u.exports,function(e){var n=t[l][1][e];return i(n||e)},u,u.exports,e,t,n,r)}return n[l].exports}for(var o="function"==typeof require&&require,l=0;l<r.length;l++)i(r[l]);return i}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){if("object"==typeof t)return function(n,r){let i=Object.assign({},t,r);return e(n,i)};n="object"==typeof n?n:{};n.annotate=n.annotate||!1;n.bare=n.bare||!1;n.display=n.display||"inline";n.standalone=n.standalone||!1;n.dir=n.dir||"ltr";n.decimalMark=n.decimalMark||".";n.colSep=n.colSep||",";n.rowSep=n.rowSep||";";","===n.decimalMark&&","===n.colSep&&(n.colSep=";");";"===n.colSep&&";"===n.rowSep&&(n.rowSep=";;");if(n.bare){if(n.standalone)throw new Error("Can't output a valid HTML without a root <math> element");if(n.display&&"inline"!==n.display.toLowerCase())throw new Error("Can't display block without root element.");if(n.dir&&"ltr"!==n.dir.toLowerCase())throw new Error("Can't have right-to-left direction without root element.")}const r=(0,o.default)(n);let i;const l=n.bare?e=>e:e=>`<math${"inline"!==n.display?` display="${n.display}"`:""}${"ltr"!==n.dir?` dir="${n.dir}"`:""}>${e}</math>`;if(n.annotate){let e=r(t.trim(),""),n=e===o.default.getlastel(e)?e:`<mrow>${e}</mrow>`;i=l("<semantics>"+n+'<annotation encoding="application/AsciiMath">'+t+"</annotation></semantics>")}else i=l(r(t.trim(),""));n.standalone&&(i="<!DOCTYPE html><html><head><title>"+t+"</title></head><body>"+i+"</body></html>");return i};var r,i=e("./lib/parser"),o=(r=i)&&r.__esModule?r:{default:r}},{"./lib/parser":3}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r={},i="[0-9\xb2\xb3\xb9\xbc-\xbe\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u09f4-\u09f9\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0b72-\u0b77\u0be6-\u0bf2\u0c66-\u0c6f\u0c78-\u0c7e\u0ce6-\u0cef\u0d66-\u0d75\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f33\u1040-\u1049\u1090-\u1099\u1369-\u137c\u16ee-\u16f0\u17e0-\u17e9\u17f0-\u17f9\u1810-\u1819\u1946-\u194f\u19d0-\u19da\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u218b\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3007\u3021-\u3029\u3038-\u303a\u3192-\u3195\u3220-\u3229\u3248-\u324f\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341\u767e\u5343\u4e07\u5104\u5146\u4eac\u5793\ud855\udf71\u79ed\u7a63\u6e9d\u6f97\u6b63\u8f09\u5272\u5206\u5398\u6bdb\u7cf8\u5ffd\u5fae\u7e4a\u6c99\u5875\u57c3\ua620-\ua629\ua6e6-\ua6ef\ua830-\ua835\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19]",o=new RegExp(i);Object.defineProperties(r,{digitRange:{value:i},digitRE:{value:o},isdigit:{value:e=>e.match(o)}});const l=["sin","cos","tan","csc","sec","cot","sinh","cosh","tanh","log","ln","det","dim","lim","mod","gcd","lcm","min","max"],c={Gamma:"\u0393",Delta:"\u0394",Theta:"\u0398",Lambda:"\u039b",Xi:"\u039e",Pi:"\u03a0",Sigma:"\u03a3",Phi:"\u03a6",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u025b",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",pi:"\u03c0",rho:"\u03c1",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",oo:"\u221e","O/":"\u2205",CC:"\u2102",NN:"\u2115",QQ:"\u211a",RR:"\u211d",ZZ:"\u2124"};l.forEach(function(e){c[e]=e}),Object.defineProperty(c,"contains",{value:function(e){return void 0!==c[e]}}),Object.defineProperty(c,"funs",{value:l}),Object.defineProperty(c,"isfun",{value:function(e){return l.indexOf(e)>=0}});const s={"*":"\xb7","**":"\u2217","***":"\u22c6","//":"/","|":"|",":":":","'":"\u2032","''":"\u2033","'''":"\u2034","''''":"\u2057",xx:"\xd7","-:":"\xf7","|><":"\u22c9","><|":"\u22ca","|><|":"\u22c8","@":"\u2218","o+":"\u2295",ox:"\u2297","o.":"\u2299","!":"!",sum:"\u2211",prod:"\u220f","^^":"\u2227","^^^":"\u22c0",vv:"\u2228",vvv:"\u22c1",nn:"\u2229",nnn:"\u22c2",uu:"\u222a",uuu:"\u22c3",int:"\u222b",oint:"\u222e",dint:"\u222c","+-":"\xb1",del:"\u2202",grad:"\u2207",aleph:"\u2135","/_":"\u2220",diamond:"\u22c4",square:"\u25a1","|__":"\u230a","__|":"\u230b","|~":"\u2308","~|":"\u2309","=":"=","!=":"\u2260","<":"&lt;",">":"&gt;","<=":"\u2264",">=":"\u2265","-<":"\u227a","-<=":"\u2aaf",">-":"\u227b",">-=":"\u2ab0",in:"\u2208","!in":"\u2209",sub:"\u2282",sup:"\u2283",sube:"\u2286",supe:"\u2287","-=":"\u2261","==":"\u2261","~=":"\u2245","~~":"\u2248",prop:"\u221d","<-":"\u2190","->":"\u2192","=>":"\u21d2","<=>":"\u21d4","|->":"\u21a6",">->":"\u21a3","->>":"\u21a0",">->>":"\u2916",uarr:"\u2191",darr:"\u2193",larr:"\u2190",rarr:"\u2192",harr:"\u2194",lArr:"\u21d0",rArr:"\u21d2",hArr:"\u21d4",iff:"\u21d4",",":",",":.":"\u2234","...":"\u2026",cdots:"\u22ef",ddots:"\u22f1",vdots:"\u22ee",if:"if",otherwise:"otherwise",and:"and",or:"or",not:"\xac",AA:"\u2200",EE:"\u2203","_|_":"\u22a5",TT:"\u22a4","|--":"\u22a2","|==":"\u22a8"};Object.defineProperty(s,"contains",{value:function(e){return void 0!==s[e]}}),Object.defineProperty(s,"get",{value:function(e){return s[e]||e}}),Object.defineProperty(s,"regexp",{value:new RegExp("("+Object.keys(s).sort(function(e,t){return t.length-e.length}).map(function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}).join("|")+"|[+-<=>|~\xac\xb1\xd7\xf7\u03d0\u03d1\u03d2\u03d5\u03f0\u03f1\u03f4\u03f5\u03f6\u0606\u0607\u0608\u2016\u2032\u2033\u2034\u2040\u2044\u2052\u2061-\u2064\u207a-\u207e\u208a-\u208e\u2605\u2606\u2660\u2661\u2662\u2663\u266d\u266e\u266f\ufb29\uff61-\uff68\uff0b\uff1c\uff1d\uff1e\uff3c\uff3e\uff5c\uff5e\uffe2\uffe9\uffea\uffeb\uffec\u2200-\u22ff\u2a00-\u2aff\u27c0-\u27e5\u2980-\u2982\u2999-\u29ff\u2301-\u23ff\u25a0-\u25ff\u2b00-\u2bff\u2190-\u21ff\u27f0-\u27ff\u2900-\u297f\u20d0-\u20ef])")});const a={open:{"(:":"\u27e8","{:":""},close:{":)":"\u27e9",":}":""},complex:{abs:{open:"|",close:"|"},floor:{open:"\u230a",close:"\u230b"},ceil:{open:"\u2308",close:"\u2309"},norm:{open:"\u2225",close:"\u2225"}}};Object.defineProperty(a.open,"regexp",{value:/([[\u27e6\u27e8\u27ea\u27ec\u27ee\u2983\u2985\u2987\u2989\u298b\u298d\u298f\u2991\u2993\u2995\u2997]|[({]:?)/}),Object.defineProperty(a.close,"regexp",{value:/([\]\u27e7\u27e9\u27eb\u27ed\u27ef\u2984\u2986\u2988\u298a\u298c\u298e\u2990\u2992\u2994\u2996\u2998]|:?[)}])/}),Object.defineProperty(a.open,"get",{value:function(e){const t=a.open[e];return"string"==typeof t?t:e}}),Object.defineProperty(a.close,"get",{value:function(e){const t=a.close[e];return"string"==typeof t?t:e}}),Object.defineProperty(a.complex,"contains",{value:function(e){return Object.keys(a.complex).indexOf(e)>=0}}),Object.defineProperty(a.complex,"get",{value:function(e){return a.complex[e]}}),Object.freeze(a.open),Object.freeze(a.close),Object.freeze(a.complex);const u={rm:"normal",bf:"bold",it:"italic",bb:"double-struck",cc:"script",tt:"monospace",fr:"fraktur",sf:"sans-serif"};Object.defineProperty(u,"get",{value:function(e){return u[e]}}),Object.defineProperty(u,"regexp",{value:new RegExp("("+Object.keys(u).join("|")+")")});const f={hat:{type:"over",accent:"^"},bar:{type:"over",accent:"\u203e"},ul:{type:"under",accent:"_"},vec:{type:"over",accent:"\u2192"},dot:{type:"over",accent:"\u22c5"},ddot:{type:"over",accent:"\u22c5\u22c5"},tilde:{type:"over",accent:"\u02dc"},cancel:{type:"enclose",attrs:{notation:"updiagonalstrike"}}};Object.defineProperty(f,"contains",{value:function(e){return Object.keys(f).indexOf(e)>=0}}),Object.defineProperty(f,"get",{value:function(e){return f[e]}}),Object.defineProperty(f,"regexp",{value:new RegExp("("+Object.keys(f).join("|")+")")}),n.numbers=r,n.identifiers=c,n.operators=s,n.groupings=a,n.fonts=u,n.accents=f},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./syntax"),o=(r=i)&&r.__esModule?r:{default:r},l=e("./lexicon");function c(e){return function t(n,r){if("object"==typeof n)return function(e){return t(e,n)};if("object"!=typeof r)return`<${e}>${n}</${e}>`;{let t=Object.keys(r).map(function(e){return`${e}="${r[e]}"`}).join(" ");return`<${e} ${t}>${n}</${e}>`}}}const s=c("mi"),a=c("mn"),u=c("mo"),f=c("mfrac"),m=c("msup"),p=c("msub"),d=c("msubsup"),h=c("munder"),g=c("mover"),b=c("munderover"),x=c("menclose"),y=c("mrow"),v=c("msqrt"),O=c("mroot"),j=c("mfenced"),w=c("mtable"),$=c("mtr"),_=c("mtd");function k(e){const t="."===e.decimalMark?"\\.":e.decimalMark,n=new RegExp(`^${l.numbers.digitRange}+(${t}${l.numbers.digitRange}+)?`),r=R(e.colSep),i=R(e.rowSep),k=R("\n");function R(e){return function(t){let n=[],r=0,i=0;for(let o=0;o<t.length;o+=1){let c=t.slice(o),s=t[o];c.startsWith(e)&&!t.slice(0,o).match(/\\(\\{2})*$/)?0===r&&(n.push(t.slice(i,o)),i=o+e.length):s.match(l.groupings.open.regexp)?r+=1:s.match(l.groupings.close.regexp)&&(r-=1)}return n.push(t.slice(i)),n}}const L=function e(t,n,r,i){if(!t)return n;if(t.match(/^\s/)){if(t.match(/^\s+(\/[^\/]|^[^\^]|_[^_|])/))return e(t.trim(),n,!0);let r=t.match(/^ +/),i=r?r[0].length:0;if(i>1){let r=`<mspace width="${i-1}ex" />`;return e(t.trim(),n+r,!0)}return e(t.trim(),n,!0)}let[o,l]=C(t,i);return(l&&l.trimLeft().startsWith("/")||l.trimLeft().startsWith("./"))&&!l.trimLeft().match(/^\.?\/\//)&&([o,l]=function e(t,n){let r=n.trim().startsWith("./"),i=n.trim().slice(r?2:1);let o,l,c;if(i.startsWith(" ")){let e=i.trim().split(" ");o=M(e[0]),c=i.trimLeft().slice(e[0].length+1)}else[o,c]=C(i);o=o||y("");l=f(S(t)+S(o),r&&{bevelled:!0});if(c&&c.trim().startsWith("/")||c.trim().startsWith("./"))return e(l,c);return[l,c]}(o,l)),e(l,n+o,!1)};function M(e){if(0===e.trim().length)return"";let t=L(e,"",!1,!0);return t===P(t)?t:y(t)}function C(t,P,R){if(!t)return["",""];let L,N,z=t[0],A=t.slice(1),q=z+(A.match(/^[A-Za-z]+/)||"");if(t.startsWith("sqrt")){let e=C(t.slice(4).trim(),P);L=v(e[0]?S(e[0]):y("")),N=e[1]}else if(t.startsWith("root")){let e=C(t.slice(4).trimLeft(),P),n=e[0]?S(e[0]):y(""),r=C(e[1].trimLeft(),P),i=r[0]?S(r[0]):y("");L=O(i+n),N=r[1]}else if("\\"===z&&t.length>1)if(t[1].match(/[(\[]/)){let e=function(e){let t=e[0],n="("===t?")":"["===t?"]":e[0],r=0,i=0;for(let o=0;o<e.length;o+=1){let l=e[o];if(i+=1,l===n){if(0===(r-=1))break}else l===t&&(r+=1)}return i}(A);L=u(t.slice(2,e)),N=t.slice(e+1)}else L=u(t[1]),N=t.slice(2);else if(l.accents.contains(q)){let e=l.accents.get(q),n=t.slice(q.length).trimLeft(),r=n.match(/^\s*\(?([ij])\)?/),i=C(n);switch(e.type){case"over":r?(L=g(s("i"===r[1]?"\u0131":"\u0237")+u(e.accent,{accent:!0})),N=n.slice(r[0].length)):(L=g(S(i[0])+u(e.accent,{accent:!0})),N=i[1]);break;case"under":L=h(S(i[0])+u(e.accent)),N=i[1];break;case"enclose":L=x(S(i[0]),e.attrs),N=i[1];break;default:throw new Error("Invalid config for accent "+q)}}else if(o.default.isfontCommand(t)){let e=o.default.splitfont(t);L=c(e.tagname)(e.text,e.font&&{mathvariant:e.font}),N=e.rest}else if(l.groupings.complex.contains(q)){let e=l.groupings.complex.get(q),n=C(t.slice(q.length).trimLeft());L=j(S(n[0]),e),N=n[1]}else if(o.default.isgroupStart(t)||o.default.isvertGroupStart(t)){let[,n,c,s,a]=o.default.isgroupStart(t)?o.default.splitNextGroup(t):o.default.splitNextVert(t);N=l.groupings.open.get(a);let u=function(){let e=k(c);return e.length>1?e:i(c)}();if(o.default.ismatrixInterior(c.trim(),e.colSep)){c.trim().endsWith(e.colSep)&&(c=c.trimRight().slice(0,-1));let t=function(e,t){let n=function(){let t=r(e);return t.length>1?t:k(e)}().map(function(e){return e.trim().slice(1,-1)});return w(n.map(G).join(""),t)}(c,"{"===n&&""===s&&{columnalign:"center left"});L=j(t,{open:n,close:s})}else if(u.length>1)if(2===u.length&&"("===n&&")"===s){let e=f(u.map(M).join(""),{linethickness:0});L=j(e,{open:n,close:s})}else{let e=u.map(r);1===W(e).length&&W(e)[0].match(/^\s*$/)&&(e=e.slice(0,-1));let t=e.map(function(e){return $(e.map((t=_,n=M,function(e){return t(n(e))})).join(""));var t,n}).join("");L=j(w(t),{open:n,close:s})}else{let t=r(c).map(M).join(""),i={open:n,close:s};","!==e.colSep&&(i.separators=e.colSep),L=j(t,i)}}else if(!P&&o.default.isgroupable(t,e)){let n=function t(n){const r=new RegExp(`(\\s|${e.colSep}|${e.rowSep}|$)`);let i=n.match(r),l=n.slice(0,i.index),c=i[0],s=n.slice(i.index+1);let a=l,u=c+s;if(!o.default.isgroupStart(s.trim())&&o.default.endsInFunc(l)){let e=t(s);a+=c+e[0],u=e[1]}else if(l.match(/root$/)){let e=t(s),n=t(e[1].trimLeft());a+=c+e[0]+" "+n[0],u=c+n[1]}return[a,u]}(t);L=M(n[0]),N=n[1]}else if(l.numbers.isdigit(z)){let e=t.match(n)[0];L=a(e),N=A.slice(e.length-1)}else if(t.match(/^#`[^`]+`/)){let e=t.match(/^#`([^`]+)`/)[1];L=a(e),N=t.slice(e.length+3)}else if(t.match(new RegExp("^"+l.operators.regexp.source))&&!l.identifiers.contains(q)){let[e,n]=o.default.splitNextOperator(t),r=t.startsWith("'"),i=E(["\u2202","\u2207"],e),l=E(["|"],e),c=t.startsWith("| "),s={};r&&(s.lspace=0,s.rspace=0),i&&(s.rspace=0),l&&(s.stretchy=!0),c&&(s.lspace="veryverythickmathspace",s.rspace="veryverythickmathspace"),L=u(e,(U=s,!(0===Object.keys(U).length)&&s)),N=n}else if(l.identifiers.contains(q)){let e=l.identifiers[q];L=e.match(/[\u0391-\u03A9\u2100-\u214F\u2200-\u22FF]/)?s(e,{mathvariant:"normal"}):s(e),N=A.slice(q.length-1)}else"O"===z&&"/"===A[0]?(L=s(l.identifiers["O/"],{mathvariant:"normal"}),N=A.slice(1)):(L=s(z),N=A);var U;return N&&N.trimLeft().match(/\.?[\^_]/)&&(R&&R.match(/m(sup|over)/)||!N.trim().startsWith("_")||!(N.trim().length<=1)&&N.trim()[1].match(/[|_]/)?"mover"!==R&&N.trim().startsWith("._")&&(N.trim().length<=2||!N.trim()[2].match(/[|_]/))?[L,N]=function(e,t){let n,r=C(t.trim().slice(2).trim(),!0,"munder"),i=r[0]?S(r[0]):y(""),o=r[1],l=o.match(/^(\.?\^)[^\^]/);if(l){let t=C(o.trim().slice(l[1].length).trim(),!0),r=t[0]?S(t[0]):y("");n=b(e+i+r),o=t[1]}else n=h(e+i);return[n,o]}(L,N):R&&R.match(/m(sub|under)/)||!N.trim().startsWith("^")||!(N.trim().length<=1||"^"!==N.trim()[1])?"munder"!==R&&N.trim().startsWith(".^")&&(N.trim().length<=2||"^"!==N.trim()[2])&&([L,N]=function(e,t){let n,r=C(t.trim().slice(2).trim(),!0,"mover"),i=r[0]?S(r[0]):y(""),o=r[1],l=o.match(/^(\.?_)[^_|]/);if(l){let t=C(o.trim().slice(l[1].length).trim(),!0),r=t[0]?S(t[0]):y("");n=b(e+r+i),o=t[1]}else n=g(e+i);return[n,o]}(L,N)):[L,N]=function(e,t){let n,r=C(t.trim().slice(1).trim(),!0,"msup"),i=r[0]?S(r[0]):y(""),l=r[1];if(l.trim().startsWith("_")&&(l.trim().length<=1||!l.trim()[1].match(/[|_]/))){let t=C(l.trim().slice(1).trim(),!0),r=t[0]?S(t[0]):y(""),c=o.default.shouldGoUnder(e)?b:d;n=c(e+r+i),l=t[1]}else{let t=o.default.shouldGoUnder(e)?g:m;n=t(e+i)}return[n,l]}(L,N):[L,N]=function(e,t){let n,r=C(t.trim().slice(1).trim(),!0,"msub"),i=r[0]?S(r[0]):y(""),l=r[1];if(l&&l.trim().startsWith("^")&&(l.trim().length<=1||"^"!==!l.trim()[1])){let t=C(l.trim().slice(1).trim(),!0),r=t[0]?S(t[0]):y(""),c=o.default.shouldGoUnder(e)?b:d;n=c(e+i+r),l=t[1]}else{let t=o.default.shouldGoUnder(e)?h:p;n=t(e+i)}return[n,l]}(L,N)),[L,N]}function G(t,n){if(n="string"==typeof n?n:"",!t||0===t.length)return $(n);let[r,i]=function t(n,r){if(!n||0===n.length)return[_(r),""];if(n[0]===e.colSep)return[_(r),n.slice(1).trim()];let[i,o]=C(n);return t(o.trim(),r+i)}(t.trim(),"");return G(i.trim(),n+r)}return L}function S(e){let t=e.replace(/^<mfenced[^>]*>/,"").replace(/<\/mfenced>$/,"");return function(e){let t=P(e);return[e.slice(0,e.lastIndexOf(t)),t]}(t)[1]===t?t:y(t)}function P(e){let t=e.match(/<\/(m[a-z]+)>$/);if(!t){let t=e.match(/<mspace\s*([a-z]+="[a-z]")*\s*\?>/);if(t){let n=t.match[0].length;return e.slice(n)}return""}let n=t[1],r=e.length-(n.length+3),i=0;for(;r>=0;r-=1){if(e.slice(r).startsWith(`<${n}`)){if(0===i)break;i-=1}e.slice(r-2).startsWith(`</${n}`)&&(i+=1)}return e.slice(r)}function E(e,t){return e.indexOf(t)>=0}function W(e){return e.slice(-1)[0]}k.getlastel=P,n.default=k},{"./lexicon":2,"./syntax":4}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./lexicon");function i(e){let t=new RegExp("^"+r.groupings.open.regexp.source);return e.match(t)}const o=new RegExp("("+r.identifiers.funs.concat(Object.keys(r.accents)).concat(["sqrt"]).sort(function(e,t){return e.length-t.length}).join("|")+")$");function l(e){const t=new RegExp("^"+r.groupings.open.regexp.source),n=new RegExp("^"+r.groupings.close.regexp.source);let i,o,l,c,s=0,a=0;for(;a<e.length;){let r=e.slice(a),u=r.match(t),f=r.match(n);if(u)"number"!=typeof i&&(i=a,l=u[0]),s+=1,a+=u[0].length;else if(f){if(0===(s-=1)){o=a+((c=f[0]).length-1);break}a+=f[0].length}else a+=1}return l?[0===i?"":e.slice(0,i),r.groupings.open.get(l),e.slice(i+l.length,c?o-(c.length-1):e.length),c?r.groupings.close.get(c):"",o?e.slice(o+1):""]:null}function c(e){function t(t,n,r){return[0===t?"":e.slice(0,t),r?"\u2016":"|",e.slice(t+(r?2:1),n),r?"\u2016":"|",e.slice(n+(r?2:1))]}let n=e.indexOf("|"),r=n+1,i=e.slice(n+1),o=i.startsWith("|"),c=o?/\|\|/:/\|/;if(o&&(i=i.slice(1),r+=1),-1===i.indexOf("|"))return null;if(i.match(/^\.?[_\^]/))return null;for(;i.length>0;){let e=l(i),u=e?e[0]:i,f=e?e[4]:"",m=c.exec(u);if(m)return t(n,r+m.index,o);r+=e.slice(0,-1).map(s("length")).reduce(a),""===e[1]?r+=2:"\u2329"===e[1]&&(r+=1),""===e[3]?r+=2:"\u232a"===e[3]&&(r+=1),i=f}return null}function s(e){return t=>t[e]}function a(e,t){return e+t}function u(e){let t=new RegExp("^("+r.fonts.regexp.source+" ?)?"+e);return e=>t.exec(e)}const f=u("(`)\\w+`"),m=u('(")');const p=["<mi>lim</mi>","<mo>\u2211</mo>","<mo>\u220f</mo>"];const d={endsInFunc:function(e){return e.match(o)},isgroupStart:i,isgroupable:function(e,t){let n=new RegExp(`^[0-9A-Za-z+\\-!]{2,}(\\s|${t.colSep}|${t.rowSep})`);return e.match(n)},isvertGroupStart:function(e){if(!e.startsWith("|"))return!1;let t=c(e);return t&&""===t[0]},splitNextGroup:l,splitNextVert:c,splitNextOperator:function(e){const t=new RegExp("^"+r.operators.regexp.source).exec(e)[0];return[r.operators.get(t),e.slice(t.length)]},ismatrixInterior:function(e,t){return i(e)&&function(){let n=l(e)[4];return n.trim().startsWith(t)||n.match(/^\s*\n/)&&i(n.trim())}()},isfontCommand:function(e){return f(e)||m(e)},splitfont:function(e){let t=f(e)||m(e),n=t&&t[2],i=t&&t[3],o='"'===i?"mtext":"`"===i?"mi":"",l=e.indexOf(i),c=l+1+e.slice(l+1).indexOf(i),s=l>0?r.fonts.get(n):"";return{tagname:o,text:e.slice(l+1,c),font:s,rest:e.slice(c+1)}},shouldGoUnder:function(e){return p.indexOf(e)>=0}};n.default=d},{"./lexicon":2}]},{},[1])(1)});
